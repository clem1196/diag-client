import{d as C,r as u,o as O,b as i,c as l,e as t,w as T,f as _,v as p,t as c,y as v,F as w,i as M,u as R,g as m,h as b}from"./index-D3XiqnbH.js";import{g as I,a as D,e as F}from"./diagnosis-Ca66f_EQ.js";import{a as L,b as S}from"./diagnosis-Bekt3y2u.js";const A={class:"container-fluid mt-3"},P=t("button",{type:"button",id:"btnEdit",hidden:"",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"}," Edit ",-1),V={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},U={class:"modal-dialog"},B={class:"modal-content"},G={class:"modal-header"},N={class:"modal-body"},z=t("div",{class:"card card-title"},[t("div",null,"Editar Diagnosis")],-1),H={class:"card card-body"},K={class:"col-auto"},q=t("label",{for:"patient"},"Paciente",-1),J={key:0,class:"text-alert-optional"},j={key:1,class:"text-alert-error"},W={class:"col-auto"},Q=t("label",{for:"Sex"},"Género",-1),X=t("option",{value:"M"},"M",-1),Y=t("option",{value:"F"},"F",-1),Z=[X,Y],$={class:"col-auto"},tt=t("label",{for:"test"},"Test",-1),et=["value"],st={key:0,class:"text-alert-error"},ot={key:1,class:"text-alert-optional"},at={class:"col-auto"},it=t("label",{for:"result"},"Result",-1),lt={key:0,class:"text-alert-optional"},nt={key:1,class:"text-alert-error"},dt={class:"col-auto"},ct=t("label",{for:"condition"},"Condición",-1),rt=t("option",{value:"activo"},"Activo",-1),ut=t("option",{value:"inactivo"},"Inactivo",-1),_t=[rt,ut],mt={class:"col-auto"},pt=t("label",{for:"observation"},"Observación",-1),vt={key:0,class:"text-alert-error"},bt={class:"modal-footer"},ht=t("button",{type:"submit",class:"btn btn-save m-2","data-bs-dismiss":"modal"}," Actualizar ",-1),ft={key:0,class:"alert alert-success mt-2",role:"alert"},gt=t("i",{class:"bi-check-circle-fill m-1"},null,-1),yt={key:1,class:"alert alert-warning mt-2",role:"alert"},xt=t("i",{class:"bi-exclamation-triangle-fill m-1"},null,-1),kt={key:2,class:"alert alert-danger mt-2"},Et=t("i",{class:"bi-exclamation-triangle-fill m-1"},null,-1),wt=C({__name:"diagnosisEdit",props:{title:{type:String,default:"Detalles"},closeFormEdit:{type:Function},editId:{type:Number,default:0}},setup(g){const r=g,y=u([]),h=u([]),e=u({patient:"",sex:"F",test:"LDH/DHL",result:"0.0",treatment:"",condition:"activo",observation:""});let x=u(["LDH/DHL","GLUCOSA","COL. TOTAL","TRIGLICERIDOS","UREA","Co2","VCM","RDW ADE IDE","GGTP","TGO AST","TGP ALT","ACIDO URICO","HEMOGLOBINA"]);const d=u({validatePatient:"",validateResult:""}),n=u({success:"",warning:"",err:""});O(async()=>{await k(),f();const a=document.getElementById("btnEdit");a==null||a.click()});const k=async()=>{const a=await I();if((a==null?void 0:a.statusText)=="OK"&&(y.values=a==null?void 0:a.data.results,console.log(a==null?void 0:a.data.results)),r.editId!==0){const o=await D(r.editId);(o==null?void 0:o.statusText)=="OK"&&(h.values=o==null?void 0:o.data.results);const s=JSON.parse(JSON.stringify(h.values))[0];e.patient=s.patient,e.sex=s.sex==="M"?"M":"F",e.test=s.test,e.result=s.result,e.treatment=s.treatment,e.condition=s.condition==="activo"?"activo":"inactivo",e.observation=s.observation}},E=async()=>{try{let a=await F(r.editId,e);(a==null?void 0:a.statusText)==="Created"?(n.success=a.data.Message,n.err="",location.reload()):(console.log("no hubo cambios"),n.warning="Modifique algo o presione cancelar")}catch(a){n.success="",n.err=a.response.data.Message,console.log(a.response.data.Message)}},f=async()=>{d.validatePatient=await L(e.patient),d.validateResult=await S(e.result)};return(a,o)=>(i(),l("div",A,[P,t("div",V,[t("div",U,[t("div",B,[t("div",G,[t("button",{onClick:o[0]||(o[0]=(...s)=>r.closeFormEdit&&r.closeFormEdit(...s)),type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]),t("div",N,[t("form",{onSubmit:T(E,["prevent"]),onKeyup:f},[z,t("div",H,[t("div",K,[q,_(t("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>e.patient=s),type:"text",class:"form-control input-size",id:"patient"},null,512),[[p,e.patient]]),d.validatePatient===""||d.validatePatient==="Opcional"?(i(),l("small",J,c(d.validatePatient),1)):(i(),l("small",j,c(d.validatePatient),1))]),t("div",W,[Q,_(t("select",{"onUpdate:modelValue":o[2]||(o[2]=s=>e.sex=s),class:"form-select select-size",id:"Sex"},Z,512),[[v,e.sex]])]),t("div",$,[tt,_(t("select",{"onUpdate:modelValue":o[3]||(o[3]=s=>e.test=s),class:"form-select select-size",id:"test"},[(i(!0),l(w,null,M(R(x),s=>(i(),l("option",{key:s,value:s},c(s),9,et))),128))],512),[[v,e.test]]),e.test===""||e.test.length===0||e.test===void 0?(i(),l("small",st," Requerido ")):(i(),l("small",ot))]),t("div",at,[it,_(t("input",{"onUpdate:modelValue":o[4]||(o[4]=s=>e.result=s),type:"text",class:"form-control input-size",id:"result"},null,512),[[p,e.result]]),d.validateResult===""||d.validateResult==="Opcional"?(i(),l("small",lt,c(d.validateResult),1)):(i(),l("small",nt,c(d.validateResult),1))]),t("div",dt,[ct,_(t("select",{"onUpdate:modelValue":o[5]||(o[5]=s=>e.condition=s),class:"form-select select-size",id:"condition"},_t,512),[[v,e.condition]])]),t("div",mt,[pt,_(t("textarea",{"onUpdate:modelValue":o[6]||(o[6]=s=>e.observation=s),type:"text",class:"form-control input-size",id:"observation",placeholder:""},null,512),[[p,e.observation]]),e.observation!==null&&e.observation.length>2083?(i(),l("small",vt," No se aceptan mas caracteres ")):m("",!0)])]),t("div",bt,[ht,t("button",{onClick:o[7]||(o[7]=(...s)=>r.closeFormEdit&&r.closeFormEdit(...s)),class:"btn btn-light","data-bs-dismiss":"modal"}," Cancelar ")])],32),n.success.length>0?(i(),l("p",ft,[gt,b(c(n.success),1)])):m("",!0),n.warning.length>0?(i(),l("p",yt,[xt,b(c(n.warning),1)])):m("",!0),n.err.length>0?(i(),l("p",kt,[Et,b(c(n.err),1)])):m("",!0)])])])])]))}});export{wt as _};
