import{d as M,r as b,o as B,b as n,e as i,f as s,g as E,w as g,y as I,F as k,h as G,u as x,v as A,t as u,i as p,l as y,p as H}from"./index-Q8u7QvsL.js";import{g as S,b as V}from"./diagnosis-Ca66f_EQ.js";import{a as N,b as U}from"./diagnosis-C12lJr_m.js";import{i as P}from"./helpers.segment-Dc4JXg8Y.js";const z=s("button",{type:"button",id:"formAdd",hidden:"",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"}," Launch static backdrop modal ",-1),K={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},j={class:"modal-dialog"},q={class:"modal-content"},W={class:"modal-header"},J=s("div",{class:"card card-title"}," Agregar Diagnosis ",-1),Q={class:"modal-body"},X={class:"card card-body"},Y={class:"col-auto"},Z=s("label",{for:"test"},"Test",-1),$=["value"],tt={key:0,class:"text-alert-error"},st={key:1,class:"text-alert-optional"},et={class:"col-auto"},at=s("label",{for:"result"},"Result",-1),ot={key:0,class:"text-alert-optional"},lt={key:1,class:"text-alert-error"},nt={class:"col-auto"},it=s("label",{for:"observation"},"ObservaciÃ³n",-1),rt={key:0,class:"text-alert-error"},dt={key:0,class:"modal-footer"},ct=s("button",{disabled:"",type:"submit",class:"btn btn-save"},"Agregar",-1),ut=s("button",{disabled:"",class:"btn btn-light","data-bs-dismiss":"modal"}," Cancelar ",-1),mt={key:1,class:"modal-footer"},bt=s("button",{type:"submit",class:"btn btn-save"},"Agregar",-1),_t={key:0,class:"alert alert-success mt-2",role:"alert"},pt=s("i",{class:"bi-check-circle-fill m-1"},null,-1),vt={key:1,class:"alert alert-warning mt-2",role:"alert"},gt=s("i",{class:"bi-exclamation-triangle-fill m-1"},null,-1),yt={key:2,class:"alert alert-danger mt-2"},ht=s("i",{class:"bi-exclamation-triangle-fill m-1"},null,-1),Ct=M({__name:"diagnosisAdd",props:{title:{type:String,default:"Detalles"},closeFormAdd:{type:Function}},setup(T){const d=T,C=H(),w=b([]),t=b({patient:"",sex:"F",test:"LDH/DHL",result:"0.0",condition:"activo",observation:""});let m=b(["LDH/DHL","GLUCOSA","COL. TOTAL","TRIGLICERIDOS","UREA","Co2","VCM","RDW ADE IDE","GGTP","TGO AST","TGP ALT","ACIDO URICO","HEMOGLOBINA"]);const c=b({validatePatient:"",validateResult:""}),l=b({success:"",warning:"",err:""});B(async()=>{await R(),v();let e=document.getElementById("formAdd");e==null||e.click(),console.log(m)});const v=async()=>{c.validatePatient=await N(t.patient),c.validateResult=await U(t.result)},L=async()=>{try{let e=await V(t);(e==null?void 0:e.statusText)==="Created"&&(l.success=e.data.Message,l.err="",setTimeout(async()=>{l.success="",location.reload()},1500))}catch(e){l.success="",l.err=e.response.data.Message,console.log(e.response.data.Message)}},R=async()=>{var h,f;const e=await S();(e==null?void 0:e.statusText)=="OK"&&(w.values=e==null?void 0:e.data.results,console.log(e==null?void 0:e.data.results));let a=await(e==null?void 0:e.data.results.filter(r=>r.patient===C.params.name));t.patient=a[0].patient,t.sex=(h=a[0])==null?void 0:h.sex,t.condition=(f=a[0])==null?void 0:f.condition;const o=[];for(let r=0;r<a.length;r++){const _=a[r];o.push(_.test)}const F=m.reduce((r,_)=>(o.find(O=>O===_)||(r=[...r,_]),r),[]);m.values=F,m.values.length===0&&(l.success="En hora buena ya tienes tus tests completo",setTimeout(()=>{l.success=""},5e3))},D=async()=>{t.patient="",t.sex="F",t.test="LDH/DHL",t.result="0.0",t.condition="activo",t.observation="",l.success="",l.err="",l.warning="",await v()};return(e,a)=>(n(),i(k,null,[z,s("div",K,[s("div",j,[s("div",q,[s("div",W,[J,s("button",{type:"button",onClick:a[0]||(a[0]=(...o)=>d.closeFormAdd&&d.closeFormAdd(...o)),class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]),s("div",Q,[s("form",{onSubmit:E(L,["prevent"]),onKeyup:v},[s("div",X,[s("div",Y,[Z,g(s("select",{"onUpdate:modelValue":a[1]||(a[1]=o=>t.test=o),class:"form-select select-size",id:"test"},[(n(!0),i(k,null,G(x(m).values,o=>(n(),i("option",{key:o,value:o},u(o),9,$))),128))],512),[[I,t.test]]),t.test===""||t.test.length===0||t.test===void 0?(n(),i("small",tt," Requerido ")):(n(),i("small",st))]),s("div",et,[at,g(s("input",{"onUpdate:modelValue":a[2]||(a[2]=o=>t.result=o),type:"text",class:"form-control input-size",id:"result"},null,512),[[A,t.result]]),c.validateResult===""||c.validateResult==="Opcional"?(n(),i("small",ot,u(c.validateResult),1)):(n(),i("small",lt,u(c.validateResult),1))]),s("div",nt,[it,g(s("textarea",{"onUpdate:modelValue":a[3]||(a[3]=o=>t.observation=o),type:"text",class:"form-control input-size",id:"observation",placeholder:""},null,512),[[A,t.observation]]),t.observation!==null&&t.observation.length>2083?(n(),i("small",rt," No se aceptan mas caracteres ")):p("",!0)])]),t.result==="0.0"||t.result===".0"||t.result==="0."||t.result==="0"||x(P)(t.result)===!1?(n(),i("div",dt,[ct,ut,s("button",{onClick:a[4]||(a[4]=(...o)=>d.closeFormAdd&&d.closeFormAdd(...o)),type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Terminar ")])):(n(),i("div",mt,[bt,s("button",{onClick:D,class:"btn btn-light"},"Cancelar"),s("button",{onClick:a[5]||(a[5]=(...o)=>d.closeFormAdd&&d.closeFormAdd(...o)),type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Terminar ")]))],32),l.success.length>0?(n(),i("p",_t,[pt,y(u(l.success),1)])):p("",!0),l.warning.length>0?(n(),i("p",vt,[gt,y(u(l.warning),1)])):p("",!0),l.err.length>0?(n(),i("p",yt,[ht,y(u(l.err),1)])):p("",!0)])])])])],64))}});export{Ct as _};
