import{d as w,o as T,r as m,b as r,e as n,f as e,u as b,t as s,F as C,h as R,p as S,q as L,g as P,w as B,v as M,j as I,k as V,l as p,R as F,i as h,s as N,x as q}from"./index-iMf7EA8S.js";import{a as E,e as U}from"./diagnosis-Ca66f_EQ.js";import{f as j}from"./diagnosis-CGKxkW9M.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./helpers.segment-Dc4JXg8Y.js";const i=c=>(N("data-v-17d45f81"),c=c(),q(),c),K={class:"container mt-4"},$=i(()=>e("i",{class:"bi-arrow-left-square-fill"},null,-1)),g=[$],z={class:"card card-title"},A={key:0},G={key:1},J=i(()=>e("li",null,[e("button",{type:"button",class:"btn btn-sm btn-save mt-2","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"}," Receta y/o Recomendación ")],-1)),Q={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},W={class:"modal-dialog modal-dialog-scrollable modal-lg"},X={class:"modal-content"},Y={class:"modal-header"},Z={class:"modal-title fs-5",id:"staticBackdropLabel"},D=i(()=>e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),O={class:"modal-body"},tt={class:"col-auto"},et={key:0,class:"text-alert-optional"},st={key:1,class:"text-alert-error"},at={class:"modal-footer"},lt=i(()=>e("button",{type:"submit",class:"btn btn-save m-2"},"Actualizar",-1)),ot=i(()=>e("a",{href:"",class:"btn btn-light","data-bs-dismiss":"modal"},"Cancelar",-1)),rt={key:0,class:"alert alert-success mt-2",role:"alert"},nt=i(()=>e("i",{class:"bi-check-circle-fill m-1"},null,-1)),it={key:1,class:"alert alert-warning mt-2",role:"alert"},ct=i(()=>e("i",{class:"bi-exclamation-triangle-fill m-1"},null,-1)),dt={key:2,class:"alert alert-danger mt-2"},ut=i(()=>e("i",{class:"bi-exclamation-triangle-fill m-1"},null,-1)),mt={class:"container mt-4"},pt=w({__name:"diagnosisDetail",props:{title:{type:String,default:"Diagnosis Details"}},setup(c){let _=S();const f=L();T(async()=>{const t=await E(_.params.id);(t==null?void 0:t.statusText)=="OK"&&(v.values=t==null?void 0:t.data.results,l.treatment=t==null?void 0:t.data.results[0].treatment,l.patient=t==null?void 0:t.data.results[0].patient,l.sex=(t==null?void 0:t.data.results[0].sex)==="M"?"M":"F",l.test=t==null?void 0:t.data.results[0].test,l.result=t==null?void 0:t.data.results[0].result,l.treatment=t==null?void 0:t.data.results[0].treatment,l.condition=(t==null?void 0:t.data.results[0].condition)==="activo"?"activo":"inactivo",l.observation=t==null?void 0:t.data.results[0].observation)});const v=m([]),l=m({patient:"",sex:"F",test:"LDH/DHL",result:"0.0",treatment:"",condition:"activo",observation:""}),d=m({validateTreatment:""}),o=m({success:"",warning:"",err:""}),y=async()=>{d.validateTreatment=await j(l.treatment)},k=async()=>{try{let t=await U(_.params.id,l);(t==null?void 0:t.statusText)==="Created"?(o.success=t.data.Message,o.err="",o.warning="",setTimeout(async()=>{o.success=""},1500)):(console.log("no hubo cambios"),o.warning="Modifique algo o presione cancelar")}catch(t){o.success="",o.err=t.response,console.log(t.response)}};return(t,u)=>(r(),n("div",K,[e("a",{onClick:u[0]||(u[0]=a=>b(f).back()),class:"col-1 icon-arrow",title:"Return"},g),e("div",z,s(c.title),1),(r(!0),n(C,null,R(v.values,a=>(r(),n("ul",{key:a.diagnosis_id},[e("li",null,"Test:"+s(" "+a.test),1),e("li",null,"Paciente:"+s(" "+a.patient),1),e("li",null,"Sex:"+s(" "+a.sex),1),e("li",null,"Pi:"+s(" "+a.pi),1),e("li",null,"P1:"+s(" "+a.p1),1),e("li",null,"P2:"+s(" "+a.p2),1),e("li",null,"P3:"+s(" "+a.p3),1),e("li",null,"Pf:"+s(" "+a.pf),1),e("li",null,"Ideal:"+s(" "+a.ideal),1),e("li",null,"Result:"+s(" "+a.result),1),e("li",null,"Interpretacion:"+s(" "+a.interpretation),1),e("li",null,"Condition:"+s(" "+a.condition),1),e("li",null,"Observation:"+s(" "+a.observation),1),e("li",null,"Created:"+s(" "+new Date(a.created).toLocaleString("pe-PE")),1),a.updated===null?(r(),n("li",A,"Updated:"+s(" "+a.updated),1)):(r(),n("li",G,"Updated:"+s(" "+new Date(a.updated).toLocaleString("pe-PE")),1)),J,e("div",null,[e("div",Q,[e("div",W,[e("div",X,[e("div",Y,[e("h1",Z," Receta y/o recomendación para: "+s(" "+a.test)+" - "+s(a.interpretation),1),D]),e("div",O,[e("form",{onSubmit:P(k,["prevent"]),onKeyup:y},[e("div",tt,[B(e("textarea",{"onUpdate:modelValue":u[1]||(u[1]=x=>l.treatment=x),type:"textarea",class:"form-control input-treatment",id:"observation",placeholder:""},null,512),[[M,l.treatment]]),e("small",null,s(l.treatment.length+" de 2083 caracteres"),1),d.validateTreatment===""||d.validateTreatment==="Opcional"?(r(),n("small",et,s(d.validateTreatment),1)):(r(),n("small",st,s(d.validateTreatment),1))]),e("div",at,[lt,ot,I(b(F),{to:`/diagnosis/detail/${b(_).params.id}`,class:"btn btn-secondary","data-bs-dismiss":"modal"},{default:V(()=>[p(" Terminar ")]),_:1},8,["to"])])],32),o.success.length>0?(r(),n("p",rt,[nt,p(s(o.success),1)])):h("",!0),o.warning.length>0?(r(),n("p",it,[ct,p(s(o.warning),1)])):h("",!0),o.err.length>0?(r(),n("p",dt,[ut,p(s(o.err),1)])):h("",!0)])])])]),e("div",mt,s(" "+a.treatment),1)])]))),128))]))}}),yt=H(pt,[["__scopeId","data-v-17d45f81"]]);export{yt as default};
