import{d as C,r as u,o as O,b as i,c as l,e as t,w as R,f as _,v as p,t as c,y as v,F as T,i as w,u as M,g as m,h as b,s as I}from"./index-DlYst6iZ.js";import{g as D,a as F,e as L}from"./diagnosis-Ca66f_EQ.js";import{a as S,b as A}from"./diagnosis-D0-_Vw6D.js";const P={class:"container-fluid mt-3"},V=t("button",{type:"button",id:"btnEdit",hidden:"",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"}," Edit ",-1),U={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},B={class:"modal-dialog"},G={class:"modal-content"},N={class:"modal-header"},z={class:"modal-body"},H=t("div",{class:"card card-title"},[t("div",null,"Editar Diagnosis")],-1),K={class:"card card-body"},q={class:"col-auto"},J=t("label",{for:"patient"},"Paciente",-1),j={key:0,class:"text-alert-optional"},W={key:1,class:"text-alert-error"},Q={class:"col-auto"},X=t("label",{for:"Sex"},"Género",-1),Y=t("option",{value:"M"},"M",-1),Z=t("option",{value:"F"},"F",-1),$=[Y,Z],tt={class:"col-auto"},et=t("label",{for:"test"},"Test",-1),st=["value"],ot={key:0,class:"text-alert-error"},at={key:1,class:"text-alert-optional"},it={class:"col-auto"},lt=t("label",{for:"result"},"Result",-1),nt={key:0,class:"text-alert-optional"},dt={key:1,class:"text-alert-error"},ct={class:"col-auto"},rt=t("label",{for:"condition"},"Condición",-1),ut=t("option",{value:"activo"},"Activo",-1),_t=t("option",{value:"inactivo"},"Inactivo",-1),mt=[ut,_t],pt={class:"col-auto"},vt=t("label",{for:"observation"},"Observación",-1),bt={key:0,class:"text-alert-error"},ht={class:"modal-footer"},ft=t("button",{type:"submit",class:"btn btn-save m-2","data-bs-dismiss":"modal"},"Actualizar",-1),gt={key:0,class:"alert alert-success mt-2",role:"alert"},yt=t("i",{class:"bi-check-circle-fill m-1"},null,-1),xt={key:1,class:"alert alert-warning mt-2",role:"alert"},kt=t("i",{class:"bi-exclamation-triangle-fill m-1"},null,-1),Et={key:2,class:"alert alert-danger mt-2"},Ct=t("i",{class:"bi-exclamation-triangle-fill m-1"},null,-1),wt=C({__name:"diagnosisEdit",props:{title:{type:String,default:"Detalles"},closeFormEdit:{type:Function},editId:{type:Number,default:0}},setup(g){const r=g;I();const y=u([]),h=u([]),e=u({patient:"",sex:"F",test:"LDH/DHL",result:"0.0",treatment:"",condition:"activo",observation:""});let x=u(["LDH/DHL","GLUCOSA","COL. TOTAL","TRIGLICERIDOS","UREA","Co2","VCM","RDW ADE IDE","GGTP","TGO AST","TGP ALT","ACIDO URICO","HEMOGLOBINA"]);const d=u({validatePatient:"",validateResult:""}),n=u({success:"",warning:"",err:""});O(async()=>{await k(),f();const a=document.getElementById("btnEdit");a==null||a.click()});const k=async()=>{const a=await D();if((a==null?void 0:a.statusText)=="OK"&&(y.values=a==null?void 0:a.data.results,console.log(a==null?void 0:a.data.results)),r.editId!==0){const o=await F(r.editId);(o==null?void 0:o.statusText)=="OK"&&(h.values=o==null?void 0:o.data.results);const s=JSON.parse(JSON.stringify(h.values))[0];e.patient=s.patient,e.sex=s.sex==="M"?"M":"F",e.test=s.test,e.result=s.result,e.treatment=s.treatment,e.condition=s.condition==="activo"?"activo":"inactivo",e.observation=s.observation}},E=async()=>{try{let a=await L(r.editId,e);(a==null?void 0:a.statusText)==="Created"?(n.success=a.data.Message,n.err="",location.reload()):(console.log("no hubo cambios"),n.warning="Modifique algo o presione cancelar")}catch(a){n.success="",n.err=a.response.data.Message,console.log(a.response.data.Message)}},f=async()=>{d.validatePatient=await S(e.patient),d.validateResult=await A(e.result)};return(a,o)=>(i(),l("div",P,[V,t("div",U,[t("div",B,[t("div",G,[t("div",N,[t("button",{onClick:o[0]||(o[0]=(...s)=>r.closeFormEdit&&r.closeFormEdit(...s)),type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]),t("div",z,[t("form",{onSubmit:R(E,["prevent"]),onKeyup:f},[H,t("div",K,[t("div",q,[J,_(t("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>e.patient=s),type:"text",class:"form-control input-size",id:"patient"},null,512),[[p,e.patient]]),d.validatePatient===""||d.validatePatient==="Opcional"?(i(),l("small",j,c(d.validatePatient),1)):(i(),l("small",W,c(d.validatePatient),1))]),t("div",Q,[X,_(t("select",{"onUpdate:modelValue":o[2]||(o[2]=s=>e.sex=s),class:"form-select select-size",id:"Sex"},$,512),[[v,e.sex]])]),t("div",tt,[et,_(t("select",{"onUpdate:modelValue":o[3]||(o[3]=s=>e.test=s),class:"form-select select-size",id:"test"},[(i(!0),l(T,null,w(M(x),s=>(i(),l("option",{key:s,value:s},c(s),9,st))),128))],512),[[v,e.test]]),e.test===""||e.test.length===0||e.test===void 0?(i(),l("small",ot," Requerido ")):(i(),l("small",at))]),t("div",it,[lt,_(t("input",{"onUpdate:modelValue":o[4]||(o[4]=s=>e.result=s),type:"text",class:"form-control input-size",id:"result"},null,512),[[p,e.result]]),d.validateResult===""||d.validateResult==="Opcional"?(i(),l("small",nt,c(d.validateResult),1)):(i(),l("small",dt,c(d.validateResult),1))]),t("div",ct,[rt,_(t("select",{"onUpdate:modelValue":o[5]||(o[5]=s=>e.condition=s),class:"form-select select-size",id:"condition"},mt,512),[[v,e.condition]])]),t("div",pt,[vt,_(t("textarea",{"onUpdate:modelValue":o[6]||(o[6]=s=>e.observation=s),type:"text",class:"form-control input-size",id:"observation",placeholder:""},null,512),[[p,e.observation]]),e.observation!==null&&e.observation.length>2083?(i(),l("small",bt," No se aceptan mas caracteres ")):m("",!0)])]),t("div",ht,[ft,t("button",{onClick:o[7]||(o[7]=(...s)=>r.closeFormEdit&&r.closeFormEdit(...s)),class:"btn btn-light","data-bs-dismiss":"modal"},"Cancelar")])],32),n.success.length>0?(i(),l("p",gt,[yt,b(c(n.success),1)])):m("",!0),n.warning.length>0?(i(),l("p",xt,[kt,b(c(n.warning),1)])):m("",!0),n.err.length>0?(i(),l("p",Et,[Ct,b(c(n.err),1)])):m("",!0)])])])])]))}});export{wt as _};
