import{d as C,r as u,o as M,a as i,c as l,f as t,w as O,h as _,v as p,t as c,y as v,F as R,i as T,u as w,j as m,g as b,s as L}from"./index-CymUAAVJ.js";import{g as I,a as D,e as F}from"./diagnosis-Ca66f_EQ.js";import{a as S,b as A}from"./diagnosis-DiTJI6CD.js";const P={class:"container-fluid mt-3"},V=t("button",{type:"button",id:"btnEdit",hidden:"",class:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"}," Launch static backdrop modal ",-1),B={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},U={class:"modal-dialog"},G={class:"modal-content"},N={class:"modal-header"},z=t("h5",{class:"modal-title",id:"staticBackdropLabel"},"Modal title",-1),H={class:"modal-body"},K=t("div",{class:"card card-title"},[t("div",null,"Editar Diagnosis")],-1),j={class:"card card-body"},q={class:"col-auto"},J=t("label",{for:"patient"},"Paciente",-1),W={key:0,class:"text-alert-optional"},Q={key:1,class:"text-alert-error"},X={class:"col-auto"},Y=t("label",{for:"Sex"},"Género",-1),Z=t("option",{value:"M"},"M",-1),$=t("option",{value:"F"},"F",-1),tt=[Z,$],et={class:"col-auto"},st=t("label",{for:"test"},"Test",-1),ot=["value"],at={key:0,class:"text-alert-error"},it={key:1,class:"text-alert-optional"},lt={class:"col-auto"},nt=t("label",{for:"result"},"Result",-1),dt={key:0,class:"text-alert-optional"},ct={key:1,class:"text-alert-error"},rt={class:"col-auto"},ut=t("label",{for:"condition"},"Condición",-1),_t=t("option",{value:"activo"},"Activo",-1),mt=t("option",{value:"inactivo"},"Inactivo",-1),pt=[_t,mt],vt={class:"col-auto"},bt=t("label",{for:"observation"},"Observación",-1),ht={key:0,class:"text-alert-error"},ft={class:"modal-footer"},gt=t("button",{type:"submit",class:"btn btn-save m-2","data-bs-dismiss":"modal"},"Actualizar",-1),yt={key:0,class:"alert alert-success mt-2",role:"alert"},xt=t("i",{class:"bi-check-circle-fill m-1"},null,-1),kt={key:1,class:"alert alert-warning mt-2",role:"alert"},Et=t("i",{class:"bi-exclamation-triangle-fill m-1"},null,-1),Ct={key:2,class:"alert alert-danger mt-2"},Mt=t("i",{class:"bi-exclamation-triangle-fill m-1"},null,-1),wt=C({__name:"diagnosisEdit",props:{title:{type:String,default:"Detalles"},closeFormEdit:{type:Function},editId:{type:Number,default:0}},setup(g){const r=g;L();const y=u([]),h=u([]),e=u({patient:"",sex:"F",test:"LDH/DHL",result:"0.0",treatment:"",condition:"activo",observation:""});let x=u(["LDH/DHL","GLUCOSA","COL. TOTAL","TRIGLICERIDOS","UREA","Co2","VCM","RDW ADE IDE","GGTP","TGO AST","TGP ALT","ACIDO URICO","HEMOGLOBINA"]);const d=u({validatePatient:"",validateResult:""}),n=u({success:"",warning:"",err:""});M(async()=>{await k(),f();const a=document.getElementById("btnEdit");a==null||a.click()});const k=async()=>{const a=await I();if((a==null?void 0:a.statusText)=="OK"&&(y.values=a==null?void 0:a.data.results,console.log(a==null?void 0:a.data.results)),r.editId!==0){const o=await D(r.editId);(o==null?void 0:o.statusText)=="OK"&&(h.values=o==null?void 0:o.data.results);const s=JSON.parse(JSON.stringify(h.values))[0];e.patient=s.patient,e.sex=s.sex==="M"?"M":"F",e.test=s.test,e.result=s.result,e.treatment=s.treatment,e.condition=s.condition==="activo"?"activo":"inactivo",e.observation=s.observation}},E=async()=>{try{let a=await F(r.editId,e);(a==null?void 0:a.statusText)==="Created"?(n.success=a.data.Message,n.err="",location.reload()):(console.log("no hubo cambios"),n.warning="Modifique algo o presione cancelar")}catch(a){n.success="",n.err=a.response.data.Message,console.log(a.response.data.Message)}},f=async()=>{d.validatePatient=await S(e.patient),d.validateResult=await A(e.result)};return(a,o)=>(i(),l("div",P,[V,t("div",B,[t("div",U,[t("div",G,[t("div",N,[z,t("button",{onClick:o[0]||(o[0]=(...s)=>r.closeFormEdit&&r.closeFormEdit(...s)),type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]),t("div",H,[t("form",{onSubmit:O(E,["prevent"]),onKeyup:f},[K,t("div",j,[t("div",q,[J,_(t("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>e.patient=s),type:"text",class:"form-control input-size",id:"patient"},null,512),[[p,e.patient]]),d.validatePatient===""||d.validatePatient==="Opcional"?(i(),l("small",W,c(d.validatePatient),1)):(i(),l("small",Q,c(d.validatePatient),1))]),t("div",X,[Y,_(t("select",{"onUpdate:modelValue":o[2]||(o[2]=s=>e.sex=s),class:"form-select select-size",id:"Sex"},tt,512),[[v,e.sex]])]),t("div",et,[st,_(t("select",{"onUpdate:modelValue":o[3]||(o[3]=s=>e.test=s),class:"form-select select-size",id:"test"},[(i(!0),l(R,null,T(w(x),s=>(i(),l("option",{key:s,value:s},c(s),9,ot))),128))],512),[[v,e.test]]),e.test===""||e.test.length===0||e.test===void 0?(i(),l("small",at," Requerido ")):(i(),l("small",it))]),t("div",lt,[nt,_(t("input",{"onUpdate:modelValue":o[4]||(o[4]=s=>e.result=s),type:"text",class:"form-control input-size",id:"result"},null,512),[[p,e.result]]),d.validateResult===""||d.validateResult==="Opcional"?(i(),l("small",dt,c(d.validateResult),1)):(i(),l("small",ct,c(d.validateResult),1))]),t("div",rt,[ut,_(t("select",{"onUpdate:modelValue":o[5]||(o[5]=s=>e.condition=s),class:"form-select select-size",id:"condition"},pt,512),[[v,e.condition]])]),t("div",vt,[bt,_(t("textarea",{"onUpdate:modelValue":o[6]||(o[6]=s=>e.observation=s),type:"text",class:"form-control input-size",id:"observation",placeholder:""},null,512),[[p,e.observation]]),e.observation!==null&&e.observation.length>2083?(i(),l("small",ht," No se aceptan mas caracteres ")):m("",!0)])]),t("div",ft,[gt,t("button",{onClick:o[7]||(o[7]=(...s)=>r.closeFormEdit&&r.closeFormEdit(...s)),class:"btn btn-light","data-bs-dismiss":"modal"},"Cancelar")])],32),n.success.length>0?(i(),l("p",yt,[xt,b(c(n.success),1)])):m("",!0),n.warning.length>0?(i(),l("p",kt,[Et,b(c(n.warning),1)])):m("",!0),n.err.length>0?(i(),l("p",Ct,[Mt,b(c(n.err),1)])):m("",!0)])])])])]))}});export{wt as _};
