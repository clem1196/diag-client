import{d as w,o as T,r as p,b as n,e as r,f as e,u as C,t as s,F as P,h as S,p as B,q as L,g as M,w as R,v as I,l as _,i as b,s as F,x as V}from"./index-BSvUkR_z.js";import{a as q,e as E}from"./diagnosis-Ca66f_EQ.js";import{f as N}from"./diagnosis-BBHSYCWv.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./helpers.segment-Dc4JXg8Y.js";const i=d=>(F("data-v-9bbe3649"),d=d(),V(),d),$={class:"container mt-4"},g=i(()=>e("i",{class:"bi-arrow-left-square-fill"},null,-1)),H=[g],K={class:"card card-title"},j={key:0},z={key:1},A=i(()=>e("li",null,[e("button",{type:"button",class:"btn btn-sm btn-save mt-2","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop"}," Receta y/o Recomendación ")],-1)),G={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true"},J={class:"modal-dialog modal-dialog-scrollable modal-lg"},Q={class:"modal-content"},W={class:"modal-header"},X={class:"modal-title fs-5",id:"staticBackdropLabel"},Y=i(()=>e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),Z={class:"modal-body"},D={class:"col-auto"},O={key:0,class:"text-alert-optional"},tt={key:1,class:"text-alert-error"},et=i(()=>e("button",{type:"submit",class:"btn btn-save m-2"},"Actualizar",-1)),st=i(()=>e("a",{href:"",class:"btn btn-light","data-bs-dismiss":"modal"},"Cancelar",-1)),at={key:0,class:"alert alert-success mt-2",role:"alert"},lt=i(()=>e("i",{class:"bi-check-circle-fill m-1"},null,-1)),ot={key:1,class:"alert alert-warning mt-2",role:"alert"},nt=i(()=>e("i",{class:"bi-exclamation-triangle-fill m-1"},null,-1)),rt={key:2,class:"alert alert-danger mt-2"},it=i(()=>e("i",{class:"bi-exclamation-triangle-fill m-1"},null,-1)),ct={class:"container mt-4"},dt=w({__name:"diagnosisDetail",props:{title:{type:String,default:"Diagnosis Details"}},setup(d){let c=B();const v=L();T(async()=>{const t=await q(c.params.id);(t==null?void 0:t.statusText)=="OK"&&(h.values=t==null?void 0:t.data.results,l.treatment=t==null?void 0:t.data.results[0].treatment,l.patient=t==null?void 0:t.data.results[0].patient,l.sex=(t==null?void 0:t.data.results[0].sex)==="M"?"M":"F",l.test=t==null?void 0:t.data.results[0].test,l.result=t==null?void 0:t.data.results[0].result,l.treatment=t==null?void 0:t.data.results[0].treatment,l.condition=(t==null?void 0:t.data.results[0].condition)==="activo"?"activo":"inactivo",l.observation=t==null?void 0:t.data.results[0].observation)});const h=p([]),l=p({patient:"",sex:"F",test:"LDH/DHL",result:"0.0",treatment:"",condition:"activo",observation:""}),u=p({validateTreatment:""}),o=p({success:"",warning:"",err:""}),f=async()=>{u.validateTreatment=await N(l.treatment)},y=async()=>{try{let t=await E(c.params.id,l);(t==null?void 0:t.statusText)==="Created"?(o.success=t.data.Message,o.err="",o.warning="",setTimeout(async()=>{o.success="",c=`/diagnosis/detail/${c.params.id}`},1500)):(console.log("no hubo cambios"),o.warning="Modifique algo o presione cancelar")}catch(t){o.success="",o.err=t.response,console.log(t.response)}},k=async()=>{c=`/diagnosis/detail/${c.params.id}`};return(t,m)=>(n(),r("div",$,[e("a",{onClick:m[0]||(m[0]=a=>C(v).back()),class:"col-1 icon-arrow",title:"Return"},H),e("div",K,s(d.title),1),(n(!0),r(P,null,S(h.values,a=>(n(),r("ul",{key:a.diagnosis_id},[e("li",null,"Test:"+s(" "+a.test),1),e("li",null,"Paciente:"+s(" "+a.patient),1),e("li",null,"Sex:"+s(" "+a.sex),1),e("li",null,"Pi:"+s(" "+a.pi),1),e("li",null,"P1:"+s(" "+a.p1),1),e("li",null,"P2:"+s(" "+a.p2),1),e("li",null,"P3:"+s(" "+a.p3),1),e("li",null,"Pf:"+s(" "+a.pf),1),e("li",null,"Ideal:"+s(" "+a.ideal),1),e("li",null,"Result:"+s(" "+a.result),1),e("li",null,"Interpretacion:"+s(" "+a.interpretation),1),e("li",null,"Condition:"+s(" "+a.condition),1),e("li",null,"Observation:"+s(" "+a.observation),1),e("li",null,"Created:"+s(" "+new Date(a.created).toLocaleString("pe-PE")),1),a.updated===null?(n(),r("li",j,"Updated:"+s(" "+a.updated),1)):(n(),r("li",z,"Updated:"+s(" "+new Date(a.updated).toLocaleString("pe-PE")),1)),A,e("div",null,[e("div",G,[e("div",J,[e("div",Q,[e("div",W,[e("h1",X," Receta y/o recomendación para: "+s(" "+a.test)+" - "+s(a.interpretation),1),Y]),e("div",Z,[e("form",{onSubmit:M(y,["prevent"]),onKeyup:f},[e("div",D,[R(e("textarea",{"onUpdate:modelValue":m[1]||(m[1]=x=>l.treatment=x),type:"textarea",class:"form-control input-treatment",id:"observation",placeholder:""},null,512),[[I,l.treatment]]),e("small",null,s(l.treatment.length+" de 2083 caracteres"),1),u.validateTreatment===""||u.validateTreatment==="Opcional"?(n(),r("small",O,s(u.validateTreatment),1)):(n(),r("small",tt,s(u.validateTreatment),1))]),e("div",{class:"modal-footer"},[et,st,e("button",{onClick:k,class:"btn btn-secondary","data-bs-dismiss":"modal"}," Terminar ")])],32),o.success.length>0?(n(),r("p",at,[lt,_(s(o.success),1)])):b("",!0),o.warning.length>0?(n(),r("p",ot,[nt,_(s(o.warning),1)])):b("",!0),o.err.length>0?(n(),r("p",rt,[it,_(s(o.err),1)])):b("",!0)])])])]),e("div",ct,s(" "+a.treatment),1)])]))),128))]))}}),ht=U(dt,[["__scopeId","data-v-9bbe3649"]]);export{ht as default};
